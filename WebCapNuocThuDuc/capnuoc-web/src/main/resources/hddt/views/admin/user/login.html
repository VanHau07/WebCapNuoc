<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
		xmlns:th="http://www.thymeleaf.org"	
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" >
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png,jpeg" sizes="16x16" th:href="@{'/e-images/' + ${ImageLogo_}}" >

    <title>Đăng nhập hệ thống</title>
	<link rel="canonical" href="https://www.wrappixel.com/templates/materialpro/">
    <!-- Bootstrap Core CSS -->
    <link th:href="@{/static/websach1/assets/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    <!-- Custom CSS -->
    <link th:href="@{/static/websach1/css/style.css}" rel="stylesheet">
    
    <link th:href="@{/static/websach1/css/icons/font-awesome/css/fontawesome-all.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/simple-line-icons/css/simple-line-icons.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/weather-icons/css/weather-icons.min.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/linea-icons/linea.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/themify-icons/themify-icons.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/flag-icon-css/flag-icon.min.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/icons/material-design-iconic-font/css/materialdesignicons.min.css}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
	<link th:href="@{/static/websach1/css/spinners.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/animate.css}" rel="stylesheet">
    
    <!-- You can change the theme colors from here -->
    <link th:href="@{/static/websach1/css/colors/blue.css}" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	<link th:href="@{/static/websach1/css/style-util.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/style-admin.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/style-admin-custom.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/css/style.custom.css}" rel="stylesheet">
	<link th:href="@{/static/websach1/assets/alertify/alertify.min.css}" rel="stylesheet">
	
	<!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <script th:src="@{/static/websach1/assets/plugins/jquery/jquery.min.js}"></script>
    
    <!-- Alertify -->
    <script th:src="@{/static/websach1/assets/alertify/alertify.min.js}"></script>
    
    <!-- Bootstrap tether Core JavaScript -->
    <script th:src="@{/static/websach1/assets/plugins/popper/popper.min.js}"></script>
    <script th:src="@{/static/websach1/assets/plugins/bootstrap/js/bootstrap.min.js}"></script>
    <!-- slimscrollbar scrollbar JavaScript -->
    <script th:src="@{/static/websach1/js/jquery.slimscroll.js}"></script>
    <!--Wave Effects -->
    <script th:src="@{/static/websach1/js/waves.js}"></script>
    <!--Menu sidebar -->
    <script th:src="@{/static/websach1/js/sidebarmenu.js}"></script>
    <!--stickey kit -->
    <script th:src="@{/static/websach1/assets/plugins/sticky-kit-master/dist/sticky-kit.min.js}"></script>
    <script th:src="@{/static/websach1/assets/plugins/sparkline/jquery.sparkline.min.js}"></script>
    <!--Custom JavaScript -->
    <script th:src="@{/static/websach1/js/customs.js}"></script>
    <!-- ============================================================== -->
    <!-- Style switcher -->
    <!-- ============================================================== -->
    <script th:src="@{/static/websach1/assets/plugins/styleswitcher/jQuery.style.switcher.js}"></script>
    
    <script th:src="@{/static/websach1/js/web-client-utility.js}"></script>
</head>

<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <svg class="circular" viewbox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle> </svg>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
	<section id="wrapper" class="login-register login-sidebar" style="background-color: #848d95;">
		<div class="login-box card">
            <div class="card-body">
                <form class="form-horizontal form-material authform" id="loginform" th:action="@{/admin/login/authenticate}" method="post" enctype="application/x-www-form-urlencoded">
                    <a href="javascript:void(0)" class="text-center db"><img th:src="@{'/e-images/' + ${ImageLogo_}}" width="70px" height="50px" alt="Home"></a>
                    <h3 class="box-title m-b-20 m-t-20 text-uppercase font-bold text-center">Đăng nhập</h3>
			<div class="form-group ">
				<div class="col-xs-12">
					<input name="j_username" class="form-control" type="text" required placeholder="Tên đăng nhập" readonly="readonly" autocomplete="given-name" > 
				</div>
			</div>
			<div class="form-group">
				<div class="col-xs-12">
					<input name="j_password" class="form-control" type="password" required placeholder="Mật khẩu" readonly="readonly" autocomplete="new-password" >
				</div>
			</div>
                    <div class="form-group captcha"  >
				<div class="d-flex no-block align-items-center" >
					<div class="p-t-0 col-6 p-l-0 p-r-0">
						<img class="pos-a centerY" alt="" id="idImageCap" style="width: auto;" >
					</div>
					<div class="p-l-5 col-6 p-l-0 p-r-0">
						<input type="text" class="form-control text-center fw-700" id="j_captcha" name="j_captcha" required placeholder="Mã kiểm tra" maxlength="10" readonly="readonly" autocomplete="off" > 
					</div>
				</div>
			</div>
                    <div class="form-group">
                        <div class="d-flex no-block align-items-center">
                            <div class="checkbox checkbox-primary p-t-0" th:if="false">
                                <input id="checkbox-signup" type="checkbox">
                                <label for="checkbox-signup"> Remember me </label>
                            </div>
                            <div class="ml-auto">
                                <a th:href="@{/forgotpass}" id="to-recover" class="text-muted"><i class="fa fa-lock m-r-5"></i> Quên mật khẩu?</a> 
                            </div>
                        </div>
                    </div>
                    <div class="form-group text-center m-t-20">
                        <div class="col-xs-12">
                            <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light login p-t-4 p-b-4" type="submit">Đăng nhập</button>
                        </div>
                    </div>
                    
                    
                </form>
                <form class="form-horizontal" id="recoverform" action="index.html" th:if="false">
                    <div class="form-group ">
                        <div class="col-xs-12">
                            <h3>Recover Password</h3>
                            <p class="text-muted">Enter your Email and instructions will be sent to you! </p>
                        </div>
                    </div>
                    <div class="form-group ">
                        <div class="col-xs-12">
                            <input class="form-control" type="text" required="" placeholder="Email">
                        </div>
                    </div>
                    <div class="form-group text-center m-t-20">
                        <div class="col-xs-12">
                            <button class="btn btn-primary btn-lg btn-block text-uppercase waves-effect waves-light" type="submit">Reset</button>
                        </div>
                    </div>
                </form>
                <script>
			    ROOT_PATH = '[[${#httpServletRequest.getContextPath()}]]';
				_csrf_value = '[[${_csrf.token}]]';_csrf_name = '[[${_csrf.parameterName}]]';
				clearTimeout(timer);
			    </script>
                <script>
                $(document).ready(function(event) {
                	refreshCaptcha($('.authform').find('#idImageCap'));
                	setTimeout(function(){
        				$('.authform').find('input[name="j_username"], input[name="j_password"], input[name="j_captcha"]').prop('readonly', false);
       				}, 1000);
                	
                	$('.authform').find('#idImageCap, #btChangeCaptcha').click(function(event) {
    					event.preventDefault();/* event.stopPropagation(); */
    					refreshCaptcha($('.authform').find('#idImageCap'));
	    			});
                	
                	$('.authform').find("button.login").click(function (event) {
                		event.preventDefault();/* event.stopPropagation(); */
        				var dataLogin = $(".authform").serializeObject();
        				
        				var _obj = this;
        				$(_obj).prop('disabled', true);
        				var $form = $('form.authform');
        				var _action = $form.attr('action');
        				$.ajax({
        					type: "POST",
        					datatype: "json",
        					url: _action,
        					data: dataLogin,
        					beforeSend: function(req) {
        						initAjaxJsonRequest(req);
        			        	showLoading();
        					},
        					success:function(res, textStatus, xhr) {
        						$(_obj).prop('disabled', false);
        						refreshCaptcha($('.authform').find('#idImageCap'));
        						$('.authform').find('input[name="j_captcha"]').val('');
        						
        						hideLoading();
        						if(res) {
        							if(res.errorCode == 0) {
        								location.href= ROOT_PATH + '/admin/main';
        							}else{
        								alertDLSuccess(createObjectError(res).html(), function(){});
        							}
        						}else{
        							alertDLSuccess('unknown error!!!', function(){});
        							hideLoading();
        						}
        						
        						
        					},
        					error:function (xhr, ajaxOptions, thrownError){
        						refreshCaptcha($('.authform').find('#idImageCap'));
        						$('.authform').find('input[name="j_captcha"]').val('');
        						$(_obj).prop('disabled', false);
        						alertDLSuccess(xhr.status + " - " + xhr.responseText, function(){});
        			            hideLoading();
        			        }
        				});
        				return false;
                	});
                	
                });
                </script>
            </div>
        </div>
    </section>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    
</body>

</html>